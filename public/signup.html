<!DOCTYPE html>
<html>

<head>
  <title>The sign up page</title>
  <link rel="stylesheet" type="text/css" href="style/header.css">
  <link rel="stylesheet" type="text/css" href="style/signup.css">
  <link rel="stylesheet" type="text/css" href="style/login.css">

  <script>
         let registerForm = document.querySelector('#registerForm')
         let usernameField = document.querySelector('#username')
         let passwordField = document.querySelector('#password')

         registerForm.addEventListener('submit', e => {
             e.preventDefault()

             registerUser()
         })

         function registerUser() {
             let options = {
                 method: 'post',
                 credentials: 'include',
                 headers: {
                     'content-type': 'application/json'
                 },
                 body: JSON.stringify({
                     username: usernameField.value,
                     password: passwordField.value
                 })
             }

             fetch('/api/users', options)
                 .then(response => response.json())
                 .then(response => {
                     if (response.status == 'OK') {
                         document.location.href = './login.html'
                     } else {
                         alert(response.message)
                     }
                 })
         }
     </script>


</head>

<body>
    <div id="menylist">
        <li><a href="/home.html">Home</a></li>
        <li><a href="/index.html">My List</a></li>
        <li><a href="/findSongs.html">Find Songs</a></li>
        <li><a href="/signup.html">Sign Up</a></li>
        <li><a href="/login.html">Login</a></li>
    </div>

<div class="loginForm">
  <h2>Sign up here to get started</h2>
  <input class="box" type="text" size="50" placeholder="Username">
  <br><br>
  <input class="box" type="password" size="50" placeholder="Password">
  <br><br>
  <input class="box" type="password" size="50" placeholder="Confirm password">
  <br><br>
  <button class="signup" type="button" ng-click="submitSignup()">SIGN UP!</button>
</div>

<div class="singer">
  <img src="pictures/singers.png" alt="singer" width="600" height="400">
</div>

</body>

<div class="footer">
  <p>This website is made by Tanja Kartz Johansen: Contact information: tj@civagaard.dk</p>
</div>

</html>
