<!DOCTYPE html>
<html ng-app="musicLibrary">
<!--myList elements-->

<head>
  <title>Music Library</title>
  <link rel="stylesheet" type="text/css" href="style/indexStyle.css">
  <!--myList elements-->
  <link rel="stylesheet" type="text/css" href="style/myList.css">
  <script type="text/javascript" src="angular.min.js"></script>

  <script type="text/javascript">
    var app = angular.module('musicLibrary', []);

    //in order to call it from the frontend I have to do what's called inject. Scope is another angular service, containing some functionality. We are using scope to diplay data on the front
    //http makes get request to server, which will give me the array of the items on the list
    app.controller('musicLibraryCtrl', function($scope, $http) {

//function to post the data
//I'm doing http.post to the route I am going to which is myList. The socond argument to post is the object newItem: $scope.newMeow
      $scope.submitNewItem = function() {
        $http.post('/myList', {newItem: $scope.newItem}).then(function() {
          alert('success!');
        });
      };

      //response is a callback function, that is called when you succesfully get the list from the server
      //this is done because you don't want the rest rest of the code to run before this is done
      //http is a service.
      //.get is a function in that service. It calls the route 'list' and gets stuff
      //it has another thing called a promise (then), which is like a string of functions. its a way to specify a callback
      //what I just made here is called an API
      $http.get('/myList').then(function(response) {

        //setting the list with what we get back from the server
        $scope.myList = response.data;

      });
    });
  </script>
  <!--myList elements-->

</head>

<body ng-controller="musicLibraryCtrl">
  <!--myList elements-->
  <h1>My Music Library</h1>
  <div id="menucolor">
    <nav id="navigation">
      <div>
        <ul id="navilist">
          <li id="menuitem">
            <a href="myList.js">My list</a>
          </li>
          <li id="menuitem">
            <a href="findSongs.js">Find songs</a>
          </li>
          <li id="menuitem">
            <a href="createAccount.js">create account</a>
          </li>
          <li id="menuitem">
            <a href="login.js">login</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>

  <!--myList elements-->
  <div>
    <h2> MY LIST </h2>

    <div class="new-item">
      <input type="text" size="40" ng-model="newItem" placeholder="Add a song">
      <button type="button" size="40" ng-click="submitNewItem()">Add</button>
    </div>
    <p ng-repeat="items in myList">
      {{ items }}
    </p>
  </div>
  <!--myList elements-->

</body>

</html>
